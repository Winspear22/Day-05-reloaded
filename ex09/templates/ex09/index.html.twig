{% extends 'base.html.twig' %}

{% block title %}Ex09 - ORM Relations & Migrations{% endblock %}

{% block content %}
    <h1>Exercise 09 - ORM Relations & Migrations</h1>
    
    <p>This exercise demonstrates Doctrine ORM relationships (OneToOne, OneToMany) and migration management.</p>

    <h2>Migration States</h2>
    
    <div class="migration-info">
        <h3>Available Options</h3>
        <p>Choose the database schema you want to use:</p>
    </div>

    <h3>1. Create Tables WITHOUT marital_status</h3>
    <p>Creates the initial schema with Person, BankAccount, and Address tables (no marital_status column).</p>
    <form method="POST" action="{{ path('ex09_create_table_without_marital_status') }}">
        <button type="submit" class="btn btn-info">
            ✓ Migrate to Version 1 (WITHOUT marital_status)
        </button>
    </form>

    <h3>2. Create Tables WITH marital_status</h3>
    <p>Adds the marital_status column to the Person table.</p>
    <form method="POST" action="{{ path('ex09_create_table_with_marital_status') }}">
        <button type="submit" class="btn btn-success">
            ✓ Migrate to Version 2 (WITH marital_status)
        </button>
    </form>

    <h3>3. Drop All Tables</h3>
    <p>Removes all tables and returns the database to its initial state (no migrations executed).</p>
    <form method="POST" action="{{ path('ex09_drop_tables') }}" 
        onsubmit="return confirm('⚠️  Are you sure? This will DELETE all tables!');">
        <button type="submit" class="btn btn-danger">
            ✗ Drop All Tables
        </button>
    </form>
    <hr>
{% endblock %}
